{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, mergeProps as _mergeProps, createTextVNode as _createTextVNode, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-1123d0d2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"wrapper\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-progress\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_progress_circular = _resolveComponent(\"v-progress-circular\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_card_text = _resolveComponent(\"v-card-text\");\n  const _component_v_spacer = _resolveComponent(\"v-spacer\");\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\");\n  const _component_v_dialog = _resolveComponent(\"v-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", null, [$setup.isWaitingtoPay ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_v_progress_circular, {\n    size: 74,\n    width: 8,\n    indeterminate: \"\"\n  })])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_v_card, {\n    variant: \"flat\"\n  }, {\n    default: _withCtx(() => [_createVNode($setup[\"MenuListBody\"], {\n      imgsrc: $setup.imgsrc,\n      isLoading: $setup.isLoading,\n      myData: $setup.myData,\n      onAddToCart: $setup.addMenutoCart\n    }, null, 8 /* PROPS */, [\"imgsrc\", \"isLoading\", \"myData\"]), _createVNode($setup[\"MenuListFooter\"], {\n      onGoToPay: $setup.gotoPay,\n      onDeleteFromCart: $setup.deletefromCart,\n      myCart: $setup.myCart\n    }, null, 8 /* PROPS */, [\"myCart\"])]),\n    _: 1 /* STABLE */\n  })])]), _createVNode(_component_v_dialog, {\n    width: \"500\",\n    height: \"500\"\n  }, {\n    activator: _withCtx(({\n      props\n    }) => [_createVNode(_component_v_btn, _mergeProps(props, {\n      text: \"Open Dialog\"\n    }), null, 16 /* FULL_PROPS */)]),\n    default: _withCtx(({\n      isActive\n    }) => [_createVNode(_component_v_card, {\n      title: \"Dialog\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_v_card_text, null, {\n        default: _withCtx(() => [_createTextVNode(\" Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \")]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_card_actions, null, {\n        default: _withCtx(() => [_createVNode(_component_v_spacer), _createVNode(_component_v_btn, {\n          text: \"Close Dialog\",\n          onClick: $event => isActive.value = false\n        }, null, 8 /* PROPS */, [\"onClick\"])]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)]),\n    _: 1 /* STABLE */\n  })], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_1","$setup","isWaitingtoPay","_createElementBlock","_hoisted_2","_createVNode","_component_v_progress_circular","size","width","indeterminate","_component_v_card","variant","imgsrc","isLoading","myData","onAddToCart","addMenutoCart","onGoToPay","gotoPay","onDeleteFromCart","deletefromCart","myCart","_component_v_dialog","height","activator","_withCtx","props","_component_v_btn","_mergeProps","text","default","isActive","title","_component_v_card_text","_component_v_card_actions","_component_v_spacer","onClick","$event","value"],"sources":["C:\\Users\\201-14\\Desktop\\vvvv\\frontend\\src\\views\\GuestMenuView.vue"],"sourcesContent":["<template>\r\n  <div class=\"wrapper\">\r\n    <div>\r\n      <div class=\"loading-progress\" v-if=\"isWaitingtoPay\">\r\n        <v-progress-circular :size=\"74\" :width=\"8\" indeterminate></v-progress-circular>\r\n      </div>\r\n      <v-card variant=\"flat\">\r\n        <MenuListBody :imgsrc=\"imgsrc\" :isLoading=\"isLoading\" :myData=\"myData\" @add-to-cart=\"addMenutoCart\">\r\n        </MenuListBody>\r\n        <MenuListFooter @go-to-pay=\"gotoPay\" @delete-from-cart=\"deletefromCart\" :myCart=\"myCart\"></MenuListFooter>\r\n      </v-card>\r\n    </div>\r\n  </div>\r\n    <v-dialog width=\"500\" height=\"500\">\r\n      <template v-slot:activator=\"{ props }\">\r\n    <v-btn v-bind=\"props\" text=\"Open Dialog\"> </v-btn>\r\n  </template>\r\n\r\n  <template v-slot:default=\"{ isActive }\">\r\n    <v-card title=\"Dialog\">\r\n      <v-card-text>\r\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\r\n      </v-card-text>\r\n\r\n      <v-card-actions>\r\n        <v-spacer></v-spacer>\r\n\r\n        <v-btn\r\n          text=\"Close Dialog\"\r\n          @click=\"isActive.value = false\"\r\n        ></v-btn>\r\n      </v-card-actions>\r\n    </v-card>\r\n  </template>\r\n    </v-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted } from 'vue';\r\nimport axios from 'axios';\r\nimport { ref } from \"vue\";\r\nimport MenuListBody from '@/components/MenuListBody.vue'\r\nimport MenuListFooter from '@/components/MenuListFooter.vue'\r\n// import { useRouter } from 'vue-router';\r\n\r\n\r\nlet myData = ref([]);\r\nlet isLoading = ref(true);\r\nlet myCart = ref([]);\r\nlet isWaitingtoPay = ref(false);\r\n// let tid = \"\";\r\n\r\n\r\nlet imgsrc = ref({});\r\nasync function getData() {\r\n  await axios.get(\"/api/menu/list\").then((d) => {\r\n    myData.value = d.data;\r\n  })\r\n}\r\n// const router = useRouter();\r\n\r\nasync function gotoPay() {\r\n  isWaitingtoPay.value = true;\r\n  let content = {};\r\n  let totalPrice = 0;\r\n  let cartState = myCart.value.map(i => {\r\n    let a = i.get('menu').mname;\r\n    let b = i.get('amount');\r\n    let c = i.get('menu').price * b;\r\n    content[a] = b.toString() + \"개\";\r\n    totalPrice += c;\r\n    return [a, b, c];\r\n  });\r\n\r\n\r\n  const data = {\r\n    'content': JSON.stringify(content).replace(/['\"]+/g, ''),\r\n    'totalPrice': totalPrice,\r\n  }\r\n\r\n\r\n\r\n\r\n  await axios.post('/api/kakaopay/ready', data).then((res) => {\r\n    if (res.status === 200) {\r\n      window.open(res.data.next_redirect_pc_url, '_blank', \"width=420,height=500,left=200,top=200\");\r\n    }\r\n  });\r\n\r\n\r\n\r\n  // axios.post('/api/order', data\r\n  //\r\n  // ).then((res) => {\r\n  //   if (res.data.isSuccess) {\r\n  //     setTimeout(() => {\r\n  //       isWaitingtoPay.value = false;\r\n  //       router.push({\r\n  //         path: '/result', name: 'result', state: {\r\n  //           ono: res.data.ono,\r\n  //           myCart: cartState,\r\n  //         }\r\n  //       });\r\n  //     }, 1000\r\n  //     );\r\n  //   } else {\r\n  //     alert('오류: 주문 접수 실패');\r\n  //     isWaitingtoPay.value = false;\r\n  //   }\r\n  //\r\n  // })\r\n}\r\n\r\n\r\nfunction addMenutoCart(i, amount) {\r\n  let map = new Map();\r\n  map.set('menu', i);\r\n  map.set('amount', amount);\r\n  myCart.value.push(map);\r\n}\r\n\r\nonMounted(async () => {\r\n  await getData().then(async () => {\r\n    for (let item of myData.value) {\r\n      if (item.imgurl.length >= 1) {\r\n        await axios.get(\"/api/menu_img/\" + item.imgurl, { responseType: 'blob' }).then((a) => {\r\n          let url = URL.createObjectURL(a.data);\r\n          imgsrc.value[item.mno] = url;\r\n        });\r\n      }\r\n    }\r\n  }\r\n  )\r\n  isLoading.value = false;\r\n\r\n\r\n});\r\n\r\n\r\nfunction deletefromCart(i) {\r\n  myCart.value.splice(i, 1);\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GuestMenuView',\r\n  props: {\r\n\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n.loading-progress {\r\n  position: absolute;\r\n  z-index: 1;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 768px;\r\n  /* top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%); */\r\n\r\n}\r\n\r\n.wrapper {\r\n  width: 768px;\r\n}\r\n\r\n@media screen and (max-width: 767px) {\r\n  .wrapper {\r\n    width: 100vw;\r\n  }\r\n\r\n  .loading-progress {\r\n    width: 100vw;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":";;;EACOA,KAAK,EAAC;AAAS;;;EAEXA,KAAK,EAAC;;;;;;;;;;6DAFfC,mBAAA,CAWM,OAXNC,UAWM,GAVJD,mBAAA,CASM,cARgCE,MAAA,CAAAC,cAAc,I,cAAlDC,mBAAA,CAEM,OAFNC,UAEM,GADJC,YAAA,CAA+EC,8BAAA;IAAzDC,IAAI,EAAE,EAAE;IAAGC,KAAK,EAAE,CAAC;IAAEC,aAAa,EAAb;6CAE7CJ,YAAA,CAISK,iBAAA;IAJDC,OAAO,EAAC;EAAM;sBACpB,MACe,CADfN,YAAA,CACeJ,MAAA;MADAW,MAAM,EAAEX,MAAA,CAAAW,MAAM;MAAGC,SAAS,EAAEZ,MAAA,CAAAY,SAAS;MAAGC,MAAM,EAAEb,MAAA,CAAAa,MAAM;MAAGC,WAAW,EAAEd,MAAA,CAAAe;gEAErFX,YAAA,CAA0GJ,MAAA;MAAzFgB,SAAS,EAAEhB,MAAA,CAAAiB,OAAO;MAAGC,gBAAgB,EAAElB,MAAA,CAAAmB,cAAc;MAAGC,MAAM,EAAEpB,MAAA,CAAAoB;;;UAIrFhB,YAAA,CAqBWiB,mBAAA;IArBDd,KAAK,EAAC,KAAK;IAACe,MAAM,EAAC;;IACVC,SAAS,EAAAC,QAAA,CAC5B,CAAkD;MADlBC;IAAK,OACrCrB,YAAA,CAAkDsB,gBAAA,EAAlDC,WAAA,CAAeF,KAAK;MAAEG,IAAI,EAAC;IAAa,+B;IAGzBC,OAAO,EAAAL,QAAA,CACtB,CAaS;MAdiBM;IAAQ,OAClC1B,YAAA,CAaSK,iBAAA;MAbDsB,KAAK,EAAC;IAAQ;wBACpB,MAEc,CAFd3B,YAAA,CAEc4B,sBAAA;0BAFD,MAEb,C,iBAFa,+HAEb,E;;UAEA5B,YAAA,CAOiB6B,yBAAA;0BANf,MAAqB,CAArB7B,YAAA,CAAqB8B,mBAAA,GAErB9B,YAAA,CAGSsB,gBAAA;UAFPE,IAAI,EAAC,cAAc;UAClBO,OAAK,EAAAC,MAAA,IAAEN,QAAQ,CAACO,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}